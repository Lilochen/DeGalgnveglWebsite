@*@using Microsoft.Web.Helpers;*@
@{
    //Lilo
    ViewBag.Title = "Kontakt";
    //ReCaptcha.PublicKey = "6LdHHhMTAAAAAOSsp5QPOaKm9IsaUzQC9tYcJMkt";
    //ReCaptcha.PrivateKey = "6LdHHhMTAAAAADlKXhiWg7bAOUuWVBILPqd2x5Oe";
    //var showRecaptcha = true;
    //if (IsPost)
    //{
    //    if (ReCaptcha.Validate())
    //    {
    //        showRecaptcha = false;
    //    }
    //    else
    //    {
    //    }
    //}
}

<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="utf-8">
    <title>
        @ViewBag.Message;
    </title>
</head>
<body>


    @section featured {
        <section class="featured">
            <div class="content-wrapper">

                <form action="" method="post">
                    <hgroup class="title">
                        <h1>@ViewBag.Message</h1>
                    </hgroup>
                    <p>
                    <p id="pName">
                        <label for="tbName">Name: </label>
                        <input type="text" id="tbName" name="tbName" value="" required />
                    </p>
                    <p id="pEMail">
                        <label for="mbToEMail">E-Mail: </label>
                        <input type="email" id="mbToEMail" name="mbToEMail" value="" required />
                    </p>
                    <p id="pTelefon">
                        <label for="telTel">Telefon (Angabe freiwillig): </label>
                        <input type="tel" id="telTel" name="telTel" value="" />
                    </p>
                    <p id="pSubject">
                        <label for="tbSubject">Betreff: </label>
                        <input type="text" id="tbSubject" name="tbSubject" value="" required />
                    </p>
                    <p id="pMessage">
                        <label for="taMessage">Nachricht: </label>
                        <textarea name="taMessage" id="taMessage" col="5" rows="10" overflow="scroll" required></textarea>
                    </p>
                    @*<div>
                            @if (showRecaptcha == true)
                            {
                                if (!string.IsNullOrWhiteSpace(ReCaptcha.PrivateKey))
                                {
                                    <p>
                                        You can get your public and private keys at
                                        the ReCaptcha.Net website (http://recaptcha.net).
                                        Then add the keys to the _AppStart.cshtml file.
                                    </p>
                                    <p>@ReCaptcha.GetHtml()</p>
                                   // <input type="submit" value="Senden!" onclick="SendMail()" />
                                }
                            }
                        </div>*@
                    <p>
                        <input type="button" id="tbSend" name="tbSend" value="Senden!" onclick="SendMail()" />
                    </p>
                </form>
            </div>
        </section>
    }
    <script type="text/javascript">
        function SendAjaxRequest(dataobject, serviceURL) {
            $.ajax({
                type: "POST",
                url: serviceURL,
                data: JSON.stringify(dataobject),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: addSuccess,
                error: addError
            });
        }
        function addSuccess(Result) {
            if (Result.result == true) {
                alert("E-Mail wurde versendet.");
            }
            else { alert("Fehler beim Senden der E-Mail."); }
        }

        function addError(Result, status) {
            alert("Ein unbekanter Fehler ist aufgetreten.");
        }
        function SendMail() {
            var serviceURL = '/Contact/SendEMail';
            var dataobject = {
                Mail_Subject: document.getElementById("tbSubject").value,
                Mail_Message: document.getElementById("taMessage").value,
                Mail_Name: document.getElementById("tbName").value,
                Mail_Tel: document.getElementById("telTel").value,
                Mail_To: document.getElementById("mbToEMail").value
            }

            $.ajax({
                type: "POST",
                url: serviceURL,
                data: JSON.stringify(dataobject),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: addSuccess,
                error: addError
            });
        }
    </script>
</body>
</html>